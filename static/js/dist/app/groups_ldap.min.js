var ldap_servers_loaded=!1;function loadLdapServers(){api.LDAP.get().success((function(e){if(0===e.length)return $("#ldap_select_group").hide(),$("#no_ldap").show(),!1;{let a=$.map(e,(function(e){return e.text=e.name+" -- "+e.protocol+"://"+e.host,e})),t=$("#ldap_servers");t.select2({placeholder:"Select a server",data:a}),1===e.length&&(t.val(a[0].id),t.trigger("change.select2"))}}))}function importLdapUsers(e){api.import.ldap(e).success((function(e){console.log(e),$.each(e,(function(e,a){addTarget(a.first_name,a.last_name,a.email,a.position)})),targets.DataTable().draw()})).error((function(e){modalError(e.responseJSON.message)}))}$(document).ready((function(){$("#ldap_btn").click((function(e){e.preventDefault();let a=$("#ldap_form");a.is(":visible")?a.hide():(a.show(),ldap_servers_loaded||(loadLdapServers(),ldap_servers_loaded=!0))})),$("#ldap_import_btn").click((function(e){e.preventDefault(),$("#modal\\.flashes").empty();let a=$(this).button("loading");const t=$("#ldap_servers").val();t?importLdapUsers(t):modalError("Please select a server"),a.button("reset")}))}));