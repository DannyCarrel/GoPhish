!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t,n,r){return $.ajax({url:"/api"+e+"?api_key="+user.api_key,async:r,method:t,data:JSON.stringify(n),dataType:"json",contentType:"application/json"})}function o(e){return $("<div/>").text(e).html()}n.r(t);var a={get:function(){return r("/users/","GET",{},!0)},post:function(e){return r("/users/","POST",e,!0)}},s={get:function(e){return r("/users/"+e,"GET",{},!0)},put:function(e){return r("/users/"+e.id,"PUT",e,!0)},delete:function(e){return r("/users/"+e,"DELETE",{},!0)}};$(document).ready(function(){var e=location.pathname;$(".nav-sidebar li").each(function(){var t=$(this);t.find("a").attr("href")===e&&t.addClass("active")}),$.fn.dataTable.moment("MMMM Do YYYY, h:mm:ss a"),$('[data-toggle="tooltip"]').tooltip()});var u=[],c=function(){$("#username").val(""),$("#password").val(""),$("#confirm_password").val(""),$("#role").val(""),$("#modal\\.flashes").empty()},i=function(e){$("#modalSubmit").unbind("click").click(function(){!function(e){if($("#password").val()===$("#confirm_password").val()){var t={username:$("#username").val(),password:$("#password").val(),role:$("#role").val()};-1!=e?(t.id=e,s.put(t).success(function(e){successFlash("User ".concat(t.username," updated successfully!")),l(),c(),$("#modal").modal("hide")}).error(function(e){modalError(e.responseJSON.message)})):a.post(t).success(function(e){successFlash("User ".concat(t.username," registered successfully!")),l(),c(),$("#modal").modal("hide")}).error(function(e){modalError(e.responseJSON.message)})}else modalError("Passwords must match.")}(e)}),$("#role").select2(),-1==e?($("#role").val("user"),$("#role").trigger("change")):s.get(e).success(function(e){$("#username").val(e.username),$("#role").val(e.role.slug),$("#role").trigger("change")}).error(function(){errorFlash("Error fetching user")})},l=function(){$("#userTable").hide(),$("#loading").show(),a.get().success(function(e){u=e,$("#loading").hide(),$("#userTable").show();var t=$("#userTable").DataTable({destroy:!0,columnDefs:[{orderable:!1,targets:"no-sort"}]});t.clear(),$.each(u,function(e,n){t.row.add([o(n.username),o(n.role.name),"<div class='pull-right'><button class='btn btn-primary edit_button' data-toggle='modal' data-backdrop='static' data-target='#modal' data-user-id='"+n.id+"'>                    <i class='fa fa-pencil'></i>                    </button>                    <button class='btn btn-danger delete_button' data-user-id='"+n.id+"'>                    <i class='fa fa-trash-o'></i>                    </button></div>"]).draw()})}).error(function(){errorFlash("Error fetching users")})};$(document).ready(function(){l(),$("#modal").on("hide.bs.modal",function(){c()}),$.fn.select2.defaults.set("width","100%"),$.fn.select2.defaults.set("dropdownParent",$("#role-select")),$.fn.select2.defaults.set("theme","bootstrap"),$.fn.select2.defaults.set("sorter",function(e){return e.sort(function(e,t){return e.text.toLowerCase()>t.text.toLowerCase()?1:e.text.toLowerCase()<t.text.toLowerCase()?-1:0})}),$("#new_button").on("click",function(){i(-1)}),$("#userTable").on("click",".edit_button",function(e){i($(this).attr("data-user-id"))}),$("#userTable").on("click",".delete_button",function(e){!function(e){var t=u.find(function(t){return t.id==e});t&&swal({title:"Are you sure?",text:"This will delete the account for ".concat(t.username," as well as all of the objects they have created.\n\nThis can't be undone!"),type:"warning",animation:!1,showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"#428bca",reverseButtons:!0,allowOutsideClick:!1,preConfirm:function(){return new Promise(function(t,n){s.delete(e).success(function(e){t()}).error(function(e){n(e.responseJSON.message)})})}}).then(function(){swal("User Deleted!","The user account for ".concat(t.username," and all associated objects have been deleted!"),"success"),$('button:contains("OK")').on("click",function(){location.reload()})})}($(this).attr("data-user-id"))})})}]);