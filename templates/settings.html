{{define "body"}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
            <ul class="nav nav-sidebar">
                <li><a href="/">Dashboard</a>
                </li>
                <li><a href="/campaigns">Campaigns</a>
                </li>
                <li><a href="/users">Users &amp; Groups</a>
                </li>
                <li><a href="/templates">Email Templates</a>
                </li>
                <li><a href="/landing_pages">Landing Pages</a>
                </li>
                <li><a href="/sending_profiles">Sending Profiles</a>
                </li>
                <li class="active"><a href="/settings">Settings</a>
                </li>
                <li>
                    <hr>
                </li>
                <li>
                    <a href="https://docs.getgophish.com/user-guide/">User Guide</a>
                </li>
                <li><a href="https://docs.getgophish.com/api-documentation/">API Documentation</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <div class="row">
        <h1 class="page-header">Settings</h1>
    </div>
    <div id="flashes" class="row"></div>
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li class="active" role="mainSettings"><a href="#mainSettings" aria-controls="mainSettings" role="tab"
                data-toggle="tab">Account Settings</a></li>
        <li role="encryptionSettings"><a href="#encryptionSettings" aria-controls="encryptionSettings" role="tab" data-toggle="tab">Encryption Settings</a></li>
		 <li role="uiSettings"><a href="#uiSettings" aria-controls="uiSettings" role="tab" data-toggle="tab">UI Settings</a></li>
    </ul>
    <!-- Tab Panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="mainSettings">
            <br />
            <div class="row">
                <label class="col-sm-2 control-label form-label">Gophish version</label>
                <div class="col-md-6">
                    <label class="form-label">{{.Version}}</label>
                </div>
            </div>
            <br />
            <div class="row">
                <label class="col-sm-2 control-label form-label">Register a New User</label>
                <div class="col-md-6">
                    <a href="/register" class="btn btn-primary"><i class="fa fa-plus"></i> Add User</a>
                </div>
            </div>
            <br />
            <div class="row">
                <label for="api_key" class="col-sm-2 control-label form-label">API Key:</label>
                <div class="col-md-6">
                    <input type="text" id="api_key" onclick="this.select();" value="{{.User.ApiKey}}" class="form-control"
                        readonly />
                </div>
                <form id="apiResetForm">
                    <button class="btn btn-primary"><i class="fa fa-refresh" type="submit"></i> Reset</button>
                    <input type="hidden" name="csrf_token" value="{{.Token}}" />
                </form>
            </div>
            <br />
            <form id="settingsForm">
                <div class="row">
                    <label for="username" class="col-sm-2 control-label form-label">Username:</label>
                    <div class="col-md-6">
                        <input type="text" id="username" name="username" value="{{.User.Username}}" class="form-control" />
                    </div>
                </div>
                <br />
                <div class="row">
                    <label for="current_password" class="col-sm-2 control-label form-label">Old Password:</label>
                    <div class="col-md-6">
                        <input type="password" id="current_password" name="current_password" autocomplete="off" class="form-control" />
                    </div>
                </div>
                <br />
                <div class="row">
                    <label for="new_password" class="col-sm-2 control-label form-label">New Password:</label>
                    <div class="col-md-6">
                        <input type="password" id="new_password" name="new_password" autocomplete="off" class="form-control" />
                    </div>
                </div>
                <br />
                <div class="row">
                    <label for="confirm_new_password" class="col-sm-2 control-label form-label">Confirm New Password:</label>
                    <div class="col-md-6">
                        <input type="password" id="confirm_new_password" name="confirm_new_password" autocomplete="off"
                            class="form-control" />
                    </div>
                </div>
				</br>
                <input type="hidden" name="csrf_token" value="{{.Token}}" />
				<input type="hidden" name="type" value="changePassword" />
                <br />
                <button class="btn btn-primary" type="submit"><i class="fa fa-save"></i> Save</button>
            </form>
            <br />
        </div>
        <div role="tabpanel" class="tab-pane" id="encryptionSettings">
				</br>
				 <button type="button" class="btn btn-primary" onclick="edit(-1)" data-toggle="modal" data-backdrop="static" data-target="#modal">
           			 <i class="fa fa-plus"></i> New Public key
				 </button>
				</br>
				 &nbsp;
				  <div id="loading">
				        <i class="fa fa-spinner fa-spin fa-4x"></i>
				  </div>
				
				 <div id="emptyMessage" class="row" style="display:none;">
				        <div class="alert alert-info">
				            No public keys added yet. Let's add one!
				        </div>
				 </div>

				 <div class="row" id="tableContainer" style="display:none;">
				    <table id="publicKeysTable" class="table" >
				         <thead>
				             <tr>
				                 <th>Name</th>
				                 <th>Public key</th>
				                 <th class="col-md-2 no-sort"></th>
				             </tr>
				         </thead>
				         <tbody>
				         </tbody>
				    </table>
				 </div>

        </div>
		<div role="tabpanel" class="tab-pane" id="uiSettings">
            <br />
            <div class="checkbox checkbox-primary">
                <input id="use_map" type="checkbox">
                <label for="use_map">Show campaign results map</label>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="modalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <!-- New Template Modal -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="dismiss()"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="templateModalLabel">New Public key</h4>
            </div>
			<form>
	            <div class="modal-body">
	                <div class="row" id="modal.flashes"></div>
	                <label class="control-label" for="friendly_name">Friendly Name:</label>
	                <div class="form-group">
	                    <input type="text" class="form-control" placeholder="Friendly public key name" id="friendly_name"
	                        autofocus />
	                </div>
	
	                <textarea rows="10" id="public_key" class="gophish-editor form-control" placeholder="Public key (RSA PEM)"></textarea>
	            </div>
	            <div class="modal-footer">
	                <button type="button" data-dismiss="modal" class="btn btn-default" onclick="dismiss()">Cancel</button>
	                <button type="button" class="btn btn-primary" id="modalSubmit">Save key</button>
	            </div>
			</form>
        </div>
    </div>
</div>
{{end}} {{define "scripts"}}
<script src="/js/dist/app/settings.min.js"></script>
{{end}}